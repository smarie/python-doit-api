



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.14">
    
    
      
        <title>API reference - doit_api</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.d3202873.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="doit_api" class="md-header-nav__button md-logo" aria-label="doit_api">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            doit_api
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              API reference
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/smarie/python-doit-api/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="doit_api" class="md-nav__button md-logo" aria-label="doit_api">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    doit_api
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/smarie/python-doit-api/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        API reference
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="API reference" class="md-nav__link md-nav__link--active">
      API reference
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#doit_config" class="md-nav__link">
    doit_config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    task
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytask" class="md-nav__link">
    @pytask
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmdtask" class="md-nav__link">
    @cmdtask
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#taskgen" class="md-nav__link">
    @taskgen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why_am_i_running" class="md-nav__link">
    why_am_i_running
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#title_with_actions" class="md-nav__link">
    title_with_actions
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#doit_config" class="md-nav__link">
    doit_config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    task
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytask" class="md-nav__link">
    @pytask
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmdtask" class="md-nav__link">
    @cmdtask
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#taskgen" class="md-nav__link">
    @taskgen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why_am_i_running" class="md-nav__link">
    why_am_i_running
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#title_with_actions" class="md-nav__link">
    title_with_actions
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smarie/python-doit-api/edit/master/docs/api_reference.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="api-reference">API reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<p>In general, using <code>help(symbol)</code> is the recommended way to get the latest documentation. In addition, this page provides an overview of the various elements in this package.</p>
<h3 id="doit_config"><code>doit_config</code><a class="headerlink" href="#doit_config" title="Permanent link">&para;</a></h3>
<p>Generates a valid DOIT_CONFIG dictionary, that can contain GLOBAL options. You can use it at the beginning of your <code>dodo.py</code> file:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">doit_api</span> <span class="kn">import</span> <span class="n">doit_config</span>

<span class="n">DOIT_CONFIG</span> <span class="o">=</span> <span class="n">doit_config</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>


<p>Almost all <code>doit</code> command line options can be changed here. See https://pydoit.org/configuration.html#configuration-at-dodo-py</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">doit_config</span><span class="p">(</span>
    <span class="c1"># execution related</span>
    <span class="n">default_tasks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>             <span class="c1"># type: List[str]</span>
    <span class="n">single</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                    <span class="c1"># type: bool</span>
    <span class="n">continue_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                 <span class="c1"># type: bool</span>
    <span class="n">always</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                    <span class="c1"># type: bool</span>
    <span class="n">cleanforget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: bool</span>
    <span class="n">cleandep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                  <span class="c1"># type: bool</span>
    <span class="n">dryrun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                    <span class="c1"># type: bool</span>
    <span class="c1"># database</span>
    <span class="n">db_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                   <span class="c1"># type: Union[str, Path]</span>
    <span class="n">dep_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                  <span class="c1"># type: Union[str, Path]</span>
    <span class="n">backend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                   <span class="c1"># type: str</span>
    <span class="c1"># verbosities</span>
    <span class="n">verbosity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                 <span class="c1"># type: int</span>
    <span class="n">failure_verbosity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>         <span class="c1"># type: int</span>
    <span class="c1"># output and working dir</span>
    <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                   <span class="c1"># type: Union[str, Path]</span>
    <span class="n">reporter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                  <span class="c1"># type: Union[str, Type]</span>
    <span class="nb">dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                       <span class="c1"># type: Union[str, Path]</span>
    <span class="c1"># parallel processing</span>
    <span class="n">num_process</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: int</span>
    <span class="n">parallel_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>             <span class="c1"># type: str</span>
    <span class="c1"># misc</span>
    <span class="n">check_file_uptodate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>       <span class="c1"># type: str</span>
    <span class="n">pdb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                       <span class="c1"># type: bool</span>
    <span class="n">codec_cls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                 <span class="c1"># type: Type</span>
    <span class="n">minversion</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                <span class="c1"># type: Union[str, Tuple[int, int, int]]</span>
    <span class="n">auto_delayed_regex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>        <span class="c1"># type: bool</span>
    <span class="n">action_string_formatting</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># type: str</span>
<span class="p">):</span>
</code></pre></div>


<p><strong>Parameters</strong></p>
<ul>
<li>
<p><code>default_tasks</code>: The list of tasks to run when no task names are specified in the commandline. By default all tasks are run. See https://pydoit.org/tasks.html#task-selection</p>
</li>
<li>
<p><code>single</code>: set this to true to execute only specified tasks ignoring their task_dep. Default: <code>False</code></p>
</li>
<li>
<p><code>continue_</code>: by default the execution of tasks is halted on the first task failure or error. You can force it to continue execution by setting this to True. See https://pydoit.org/cmd_run.html#continue</p>
</li>
<li>
<p><code>always</code>: set this to True to always execute tasks even if up-to-date (default: False)</p>
</li>
<li>
<p><code>cleanforget</code>: a boolean, set this to true (default: False) if you like to also make doit forget previous execution of cleaned tasks. See https://pydoit.org/cmd_other.html#clean</p>
</li>
<li>
<p><code>cleandep</code>: By default if a task contains task-dependencies those are not automatically cleaned too. Set this flag to True to do it. Note that if you execute the default tasks, this is set to True by default. See https://pydoit.org/cmd_other.html#clean</p>
</li>
<li>
<p><code>dryrun</code>: a boolean (default False), telling doit to print actions without really executing them. See https://pydoit.org/cmd_other.html#dry-run</p>
</li>
<li>
<p><code>db_file</code>: an alias for dep_file</p>
</li>
<li>
<p><code>dep_file</code>: sets the name of the file to save the "DB", default is .doit.db. Note that DBM backends might save more than one file, in this case the specified name is used as a base name. See https://pydoit.org/cmd_run.html#db-file</p>
</li>
<li>
<p><code>backend</code>: The backend used by pydoit to store the execution states and results. A string that can be any of 'dbm' (default), 'json' (slow but good for debugging), 'sqlite3' (supports concurrent access). Other choices may be available if you install doit plugins adding backends (e.g. redit...). See https://pydoit.org/cmd_run.html#db-backend</p>
</li>
<li>
<p><code>verbosity</code>: An integer defining the verbosity level. Default is 1. See https://pydoit.org/tasks.html#verbosity</p>
<ul>
<li>0 capture (do not print) stdout/stderr from task,</li>
<li>1 capture stdout only,</li>
<li>2 do not capture anything (print everything immediately).</li>
</ul>
</li>
<li>
<p><code>failure_verbosity</code>: Option to control if stdout/stderr should be re-displayed in the end of of report. This is useful when used in conjunction with the <code>continue</code> option. Default: 0. See https://pydoit.org/cmd_run.html#failure-verbosity</p>
</li>
<li>
<p>0 do not show re-display</p>
</li>
<li>1 re-display stderr only</li>
<li>
<p>2 re-display both stderr/stdout</p>
</li>
<li>
<p><code>outfile</code>: output file where to write the results to. Default is stdout. See https://pydoit.org/cmd_run.html#output-file</p>
</li>
<li>
<p><code>reporter</code>: choice of reporter for the console. Can be a string indicating a reporter included in doit, or a class. See https://pydoit.org/cmd_run.html#reporter and https://pydoit.org/cmd_run.html#custom-reporter. Supported string values are </p>
</li>
<li>
<p>'console' (default), </p>
</li>
<li>'executed-only' (Produces zero output if no task is executed),</li>
<li>'json' (Output results in JSON format)</li>
<li>
<p>'zero' (display only error messages (does not display info on tasks being executed/skipped). This is used when you only want to see the output generated by the tasks execution.)</p>
</li>
<li>
<p><code>dir</code>: By default the directory of the dodo file is used as the "current working directory" on python execution. You can specify a different cwd with this argument. See https://pydoit.org/cmd_run.html#dir-cwd</p>
</li>
<li>
<p><code>num_process</code>: the number of parallel execution processes to use. Default 1. See https://pydoit.org/cmd_run.html#parallel-execution</p>
</li>
<li>
<p><code>parallel_type</code>: the type of parallelism mechanism used when process is set to a number larger than 1. A string one of 'thread' (uses threads) and 'process' (uses python multiprocessing module, default).</p>
</li>
<li>
<p><code>check_file_uptodate</code>: a string indicating how to check if files have been modified. See https://pydoit.org/cmd_run.html#check-file-uptodate</p>
</li>
<li>
<p>'md5': use the md5sum (default)</p>
</li>
<li>
<p>'timestamp': use the timestamp. </p>
</li>
<li>
<p><code>pdb</code>: set this to True to get into PDB (python debugger) post-mortem in case of unhandled exception. Default: False. See https://pydoit.org/cmd_run.html#pdb</p>
</li>
<li>
<p><code>codec_cls</code>: a class used to serialize and deserialize values returned by python-actions. Default <code>JSONCodec</code>. See https://pydoit.org/cmd_run.html#codec-cls</p>
</li>
<li>
<p><code>minversion</code>: an optional string or a 3-element tuple with integer values indicating the minimum/oldest doit version that can be used with a dodo.py file. If specified as a string any part that is not a number i.e.(dev0, a2, b4) will be converted to -1. See https://pydoit.org/cmd_run.html#minversion</p>
</li>
<li>
<p><code>auto_delayed_regex</code>: set this to True (default False) to use the default regex ".*" for every delayed task loader for which no regex was explicitly defined. See https://pydoit.org/cmd_run.html#automatic-regex-for-delayed-task-loaders</p>
</li>
<li>
<p><code>action_string_formatting</code>: Defines the templating style used by your cmd action strings for automatic variable substitution. It is a string that can be 'old' (default), 'new', or 'both'. See https://pydoit.org/tasks.html#keywords-on-cmd-action-string</p>
</li>
</ul>
<p><strong>Outputs</strong></p>
<p><code>config_dict</code>: a configuration dictionary that you can use as the DOIT_CONFIG variable in your dodo.py file</p>
<h3 id="task"><code>task</code><a class="headerlink" href="#task" title="Permanent link">&para;</a></h3>
<p>Creates a doit task.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">doit_api</span> <span class="kn">import</span> <span class="n">task</span>

<span class="n">echoer</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;echoer&quot;</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;echo hi&quot;</span><span class="p">],</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;the doc for echoer&quot;</span><span class="p">)</span>
</code></pre></div>


<p>It signature regroups all options that you usually can set on a <code>doit</code> task, with sensible defaults. </p>
<p>A minimal <code>doit</code> task consists of one or several actions. You must provide at least one action in <code>actions</code>. If <code>tell_why_i_am_running=True</code> (default) an additional action will be prepended to print the reason why the task is running if the task declared a <code>file_dep</code>, <code>task_dep</code>, <code>uptodate</code> or <code>targets</code>.</p>
<p>All other parameters match those in <code>doit</code> conventions (See parameters below), except</p>
<ul>
<li><code>name</code> that is an intelligent placeholder for <code>basename</code> (if a task is a simple task) or <code>name</code> (if the task is a subtask in a <code>@taskgen</code> generator),</li>
<li><code>title</code> that adds support for plain strings and by default is <code>title_with_actions</code>,</li>
<li><code>task_dep</code>, <code>setup</code> and <code>calc_dep</code> where if a task callable (decorated with <code>@pytask</code> or not) is provided, the corresponding name will be used.</li>
</ul>
<p>Note: the <code>watch</code> parameter (Linux and Mac only) is not yet supported.
See [doit doc](https://pydoit.org/cmd_other.html?highlight=watch#auto-watch</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">task</span><span class="p">(</span>
     <span class="c1"># -- task information + what the task is doing when run</span>
     <span class="n">name</span><span class="p">,</span>                        <span class="c1"># type: str</span>
     <span class="n">actions</span><span class="p">,</span>                     <span class="c1"># type: List[DoitAction]</span>
     <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                    <span class="c1"># type: str</span>
     <span class="n">title</span><span class="o">=</span><span class="n">title_with_actions</span><span class="p">,</span>    <span class="c1"># type: Union[str, Callable]</span>
     <span class="n">tell_why_am_i_running</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># type: bool</span>
     <span class="c1"># -- preventing useless runs and selecting order</span>
     <span class="n">targets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                <span class="c1"># type: List[DoitPath]</span>
     <span class="n">file_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitPath]</span>
     <span class="n">task_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitTask]</span>
     <span class="n">uptodate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[Optional[Union[bool, Callable, str]]]</span>
     <span class="c1"># -- advanced</span>
     <span class="n">setup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                  <span class="c1"># type: List[DoitTask]</span>
     <span class="n">teardown</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitAction]</span>
     <span class="n">getargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                <span class="c1"># type: Dict[str, Tuple[str, str]]</span>
     <span class="n">calc_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitTask]</span>
     <span class="c1"># -- misc</span>
     <span class="n">verbosity</span><span class="o">=</span><span class="kc">None</span>               <span class="c1"># type: int</span>
<span class="p">)</span>
</code></pre></div>


<p><strong>Parameters:</strong></p>
<ul>
<li>
<p><code>name</code>: a mandatory name for the task. Note that this parameter will intelligently set 'basename' for normal tasks or 'name' for subtasks in a task generator (<code>@taskgen</code>). See <a href="https://pydoit.org/tasks.html#task-name">doit doc</a></p>
</li>
<li>
<p><code>actions</code>: a mandatory list of actions that this task should execute. There are 2 basic kinds of actions: cmd-action and python-action. See <a href="https://pydoit.org/tasks.html#actions">doit doc</a></p>
</li>
<li>
<p><code>doc</code>: an optional documentation string for the task. See <a href="https://pydoit.org/tasks.html#doc">doit doc</a></p>
</li>
<li>
<p><code>title</code>: an optional message string or callable generating a message, to print when the task is run. If nothing is provided, by default the task name is printed. If a string is provided, the task name will automatically be printed before it. If a callable is provided it should receive a single <code>task</code> argument and return a string. See <a href="https://pydoit.org/tasks.html#title">doit doc</a></p>
</li>
<li>
<p><code>tell_why_am_i_running</code>: if True (default), an additional <code>why_am_i_running</code> action is prepended to the list of actions</p>
</li>
<li>
<p><code>file_dep</code>: an optional list of strings or instances of any pathlib Path class indicating the files required for this task to run. When none of these files are modified, the task will be skipped if already run. See <a href="https://pydoit.org/tasks.html#file-dep-file-dependency">doit doc</a></p>
</li>
<li>
<p><code>task_dep</code>: an optional list of tasks (names or callables) that should be run <em>before</em> this task. Note that this is also a convenient way to create a group of tasks. See <a href="https://pydoit.org/dependencies.html#task-dependency">doit doc</a></p>
</li>
<li>
<p><code>uptodate</code>: an optional list where each element can be True (up to date), False (not up to date), None (ignored), a callable or a command(string). Many pre-baked callables from <code>doit.tools</code> can be used: <code>result_dep</code> to depend on the result of another task, <code>run_once</code> to run only once, <code>timeout</code> for time-based expiration, <code>config_changed</code> for changes in a “configuration” string or dictionary, and more... See <a href="https://pydoit.org/dependencies.html#uptodate">doit doc</a></p>
</li>
<li>
<p><code>targets</code>: an optional list of strings or instances of any pathlib Path class indicating the files created by the task. They can be any file path (a file or folder). If a target does not exist the task will be executed. Two different tasks <em>can not</em> have the same target. See <a href="https://pydoit.org/tasks.html#targets">doit doc</a></p>
</li>
<li>
<p><code>setup</code>: tasks to be run before this task but only when it is run. See <a href="https://pydoit.org/dependencies.html#setup-task">doit doc</a></p>
</li>
<li>
<p><code>teardown</code>: actions to run once all tasks are completed. See <a href="https://pydoit.org/dependencies.html#setup-task">doit doc</a></p>
</li>
<li>
<p><code>getargs</code>: an optional dictionary where the key is the argument name used on actions, and the value is a tuple with 2 strings: task name, “value name”. getargs provides a way to use values computed from one task in another task. See <a href="https://pydoit.org/dependencies.html#getargs">doit doc</a></p>
</li>
<li>
<p><code>calc_dep</code>: See <a href="https://pydoit.org/dependencies.html#calculated-dependencies">doit doc</a></p>
</li>
<li>
<p><code>verbosity</code>: an optional custom verbosity level (0, 1, or 2) for this task. See <a href="https://pydoit.org/tasks.html#verbosity">doit doc</a></p>
</li>
</ul>
<p>Note: this relies on the <code>create_doit_tasks</code> hook, see <a href="https://pydoit.org/task_creation.html#custom-task-definition">here</a></p>
<h3 id="pytask"><code>@pytask</code><a class="headerlink" href="#pytask" title="Permanent link">&para;</a></h3>
<p>A decorator to create a task containing a python action (the decorated function), and optional additional actions.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">doit_api</span> <span class="kn">import</span> <span class="n">pytask</span>

<span class="nd">@pytask</span>
<span class="k">def</span> <span class="nf">a</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; the doc for a &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>

<span class="nd">@pytask</span><span class="p">(</span><span class="n">targets</span><span class="o">=...</span><span class="p">,</span> <span class="n">file_deps</span><span class="o">=...</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">b</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hi&quot;</span><span class="p">)</span>
</code></pre></div>


<p>A minimal <code>doit</code> task consists of one or several actions. Here, the main action is a call to the decorated function. You can specify actions to be done before and after that/these <code>actions</code> in <code>pre_actions</code> and <code>post_actions</code>.</p>
<p>If <code>tell_why_i_am_running=True</code> (default) an additional action will be prepended to print the reason why the task is running if the task declared a <code>file_dep</code>, <code>task_dep</code>, <code>uptodate</code> or <code>targets</code>.</p>
<p>All other parameters match those in <code>doit</code> conventions (See parameters below), except</p>
<ul>
<li><code>name</code> that is an intelligent placeholder for <code>basename</code> (if a task is a simple task) or <code>name</code> (if the task is a subtask in a <code>@taskgen</code> generator),</li>
<li><code>title</code> that adds support for plain strings and by default is <code>title_with_actions</code>,</li>
<li><code>task_dep</code>, <code>setup</code> and <code>calc_dep</code> where if a task callable (decorated with <code>@pytask</code> or not) is provided, the corresponding name will be used.</li>
</ul>
<p>Note: the <code>watch</code> parameter (Linux and Mac only) is not yet supported.
See [doit doc](https://pydoit.org/cmd_other.html?highlight=watch#auto-watch</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">pytask</span><span class="p">(</span>
     <span class="c1"># -- task information</span>
     <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                   <span class="c1"># type: str</span>
     <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                    <span class="c1"># type: str</span>
     <span class="c1"># -- what the task is doing when run</span>
     <span class="n">title</span><span class="o">=</span><span class="n">title_with_actions</span><span class="p">,</span>    <span class="c1"># type: Union[str, Callable]</span>
     <span class="n">pre_actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>            <span class="c1"># type: List[DoitAction]</span>
     <span class="n">post_actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>           <span class="c1"># type: List[DoitAction]</span>
     <span class="n">tell_why_am_i_running</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># type: bool</span>
     <span class="c1"># -- preventing useless runs and selecting order</span>
     <span class="n">targets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                <span class="c1"># type: List[DoitPath]</span>
     <span class="n">file_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitPath]</span>
     <span class="n">task_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitTask]</span>
     <span class="n">uptodate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[Optional[Union[bool, Callable, str]]]</span>
     <span class="c1"># -- advanced</span>
     <span class="n">setup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                  <span class="c1"># type: List[DoitTask]</span>
     <span class="n">teardown</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitAction]</span>
     <span class="n">getargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                <span class="c1"># type: Dict[str, Tuple[str, str]]</span>
     <span class="n">calc_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitTask]</span>
     <span class="c1"># -- misc</span>
     <span class="n">verbosity</span><span class="o">=</span><span class="kc">None</span>               <span class="c1"># type: int</span>
<span class="p">)</span>
</code></pre></div>


<p><strong>Parameters:</strong></p>
<ul>
<li>
<p><code>name</code>: an alternate name for the task. By default the name of the decorated function is used. Note that this parameter will intelligently set 'basename' for normal tasks or 'name' for subtasks in a task generator (<code>@taskgen</code>). See <a href="https://pydoit.org/tasks.html#task-name">doit doc</a></p>
</li>
<li>
<p><code>doc</code>: an optional documentation string for the task. By default, the decorated function docstring will be used. See <a href="https://pydoit.org/tasks.html#doc">doit doc</a></p>
</li>
<li>
<p><code>title</code>: an optional message string or callable generating a message, to print when the task is run. If nothing is provided, by default the task name is printed. If a string is provided, the task name will automatically be printed before it. If a callable is provided it should receive a single <code>task</code> argument and return a string. See <a href="https://pydoit.org/tasks.html#title">doit doc</a></p>
</li>
<li>
<p><code>pre_actions</code>: an optional list of actions to be executed before the main action(s). There are 2 basic kinds of actions: cmd-action and python-action. See <a href="https://pydoit.org/tasks.html#actions">doit doc</a></p>
</li>
<li>
<p><code>post_actions</code>: an optional list of actions to be executed after the main action(s). There are 2 basic kinds of actions: cmd-action and python-action. See <a href="https://pydoit.org/tasks.html#actions">doit doc</a></p>
</li>
<li>
<p><code>tell_why_am_i_running</code>: if True (default), an additional <code>why_am_i_running</code> action is prepended to the list of actions</p>
</li>
<li>
<p><code>file_dep</code>: an optional list of strings or instances of any pathlib Path class indicating the files required for this task to run. When none of these files are modified, the task will be skipped if already run. See <a href="https://pydoit.org/tasks.html#file-dep-file-dependency">doit doc</a></p>
</li>
<li>
<p><code>task_dep</code>: an optional list of tasks (names or callables) that should be run <em>before</em> this task. Note that this is also a convenient way to create a group of tasks. See <a href="https://pydoit.org/dependencies.html#task-dependency">doit doc</a></p>
</li>
<li>
<p><code>uptodate</code>: an optional list where each element can be True (up to date), False (not up to date), None (ignored), a callable or a command(string). Many pre-baked callables from <code>doit.tools</code> can be used: <code>result_dep</code> to depend on the result of another task, <code>run_once</code> to run only once, <code>timeout</code> for time-based expiration, <code>config_changed</code> for changes in a “configuration” string or dictionary, and more... See <a href="https://pydoit.org/dependencies.html#uptodate">doit doc</a></p>
</li>
<li>
<p><code>targets</code>: an optional list of strings or instances of any pathlib Path class indicating the files created by the task. They can be any file path (a file or folder). If a target does not exist the task will be executed. Two different tasks <em>can not</em> have the same target. See <a href="https://pydoit.org/tasks.html#targets">doit doc</a></p>
</li>
<li>
<p><code>setup</code>: tasks to be run before this task but only when it is run. See <a href="https://pydoit.org/dependencies.html#setup-task">doit doc</a></p>
</li>
<li>
<p><code>teardown</code>: actions to run once all tasks are completed. See <a href="https://pydoit.org/dependencies.html#setup-task">doit doc</a></p>
</li>
<li>
<p><code>getargs</code>: an optional dictionary where the key is the argument name used on actions, and the value is a tuple with 2 strings: task name, “value name”. getargs provides a way to use values computed from one task in another task. See <a href="https://pydoit.org/dependencies.html#getargs">doit doc</a></p>
</li>
<li>
<p><code>calc_dep</code>: See <a href="https://pydoit.org/dependencies.html#calculated-dependencies">doit doc</a></p>
</li>
<li>
<p><code>verbosity</code>: an optional custom verbosity level (0, 1, or 2) for this task. See <a href="https://pydoit.org/tasks.html#verbosity">doit doc</a></p>
</li>
</ul>
<p>Note: this relies on the <code>create_doit_tasks</code> hook, see <a href="https://pydoit.org/task_creation.html#custom-task-definition">here</a></p>
<h3 id="cmdtask"><code>@cmdtask</code><a class="headerlink" href="#cmdtask" title="Permanent link">&para;</a></h3>
<p>A decorator to create a task containing a shell command action (returned by the decorated function), and optional additional actions.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">doit_api</span> <span class="kn">import</span> <span class="n">cmdtask</span>

<span class="nd">@cmdtask</span>
<span class="k">def</span> <span class="nf">a</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; the doc for a &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;echo hi&quot;</span>

<span class="nd">@cmdtask</span><span class="p">(</span><span class="n">targets</span><span class="o">=</span><span class="s1">&#39;foo.txt&#39;</span><span class="p">,</span> <span class="n">file_deps</span><span class="o">=...</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">b</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; the doc for b &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    echo about to create file</span>
<span class="s2">    echo hi &gt; foo.txt</span>
<span class="s2">    &quot;&quot;&quot;</span>

<span class="nd">@cmdtask</span>
<span class="k">def</span> <span class="nf">c</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; the doc for c &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s2">&quot;echo hi&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
    <span class="p">]</span>
</code></pre></div>


<p>A minimal <code>doit</code> task consists of one or several actions. Here, the main action is a shell command or sequence of shell commands, returned by the decorated function. In addition to supporting all ways to express a command action in doit, this also supports multiline strings (see rejected <a href="https://github.com/pydoit/doit/issues/314">feature request</a>) and plain string or tuple (not in a list). Your function can return:</p>
<ul>
<li>A string (command to be executed with the shell).</li>
<li>A multiline string (commands to be executed with the shell, line by line. Blank lines automatically trimmed)</li>
<li>a tuple (not list!) of strings or pathlib Paths (command to be executed without the shell).</li>
<li>a list of strings or tuples. Note that in this case strings can not be multiline.</li>
</ul>
<p>See <a href="https://pydoit.org/tasks.html#cmd-action">doit cmd-action</a>.</p>
<p>You can specify actions to be done before and after that/these <code>actions</code> in <code>pre_actions</code> and <code>post_actions</code>.</p>
<p>If <code>tell_why_i_am_running=True</code> (default) an additional action will be prepended to print the reason why the task is running if the task declared a <code>file_dep</code>, <code>task_dep</code>, <code>uptodate</code> or <code>targets</code>.</p>
<p>All other parameters match those in <code>doit</code> conventions (See parameters below), except</p>
<ul>
<li><code>name</code> that is an intelligent placeholder for <code>basename</code> (if a task is a simple task) or <code>name</code> (if the task is a subtask in a <code>@taskgen</code> generator),</li>
<li><code>title</code> that adds support for plain strings and by default is <code>title_with_actions</code>,</li>
<li><code>task_dep</code>, <code>setup</code> and <code>calc_dep</code> where if a task callable (decorated with <code>@pytask</code> or not) is provided, the corresponding name will be used.</li>
</ul>
<p>Note: the <code>watch</code> parameter (Linux and Mac only) is not yet supported.
See [doit doc](https://pydoit.org/cmd_other.html?highlight=watch#auto-watch</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">cmdtask</span><span class="p">(</span>
           <span class="c1"># -- task information</span>
           <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                   <span class="c1"># type: Union[str, Any]</span>
           <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                    <span class="c1"># type: str</span>
           <span class="c1"># -- what the task is doing when run</span>
           <span class="n">title</span><span class="o">=</span><span class="n">title_with_actions</span><span class="p">,</span>    <span class="c1"># type: Union[str, Callable]</span>
           <span class="n">pre_actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>            <span class="c1"># type: List[DoitAction]</span>
           <span class="n">post_actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>           <span class="c1"># type: List[DoitAction]</span>
           <span class="n">tell_why_am_i_running</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># type: bool</span>
           <span class="c1"># -- preventing useless runs and selecting order</span>
           <span class="n">targets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                <span class="c1"># type: List[DoitPath]</span>
           <span class="n">clean</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                  <span class="c1"># type: Union[bool, List[DoitAction]]</span>
           <span class="n">file_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitPath]</span>
           <span class="n">task_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitTask]</span>
           <span class="n">uptodate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[Optional[Union[bool, Callable, str]]]</span>
           <span class="c1"># -- advanced</span>
           <span class="n">setup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                  <span class="c1"># type: List[DoitTask]</span>
           <span class="n">teardown</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitAction]</span>
           <span class="n">getargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                <span class="c1"># type: Dict[str, Tuple[str, str]]</span>
           <span class="n">calc_dep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>               <span class="c1"># type: List[DoitTask]</span>
           <span class="c1"># -- misc</span>
           <span class="n">verbosity</span><span class="o">=</span><span class="kc">None</span>               <span class="c1"># type: int</span>
<span class="p">):</span>
</code></pre></div>


<p><strong>Parameters:</strong></p>
<ul>
<li>
<p><code>name</code>: an alternate name for the task. By default the name of the decorated function is used. Note that this parameter will intelligently set 'basename' for normal tasks or 'name' for subtasks in a task generator (<code>@taskgen</code>). See <a href="https://pydoit.org/tasks.html#task-name">doit doc</a></p>
</li>
<li>
<p><code>doc</code>: an optional documentation string for the task. By default, the decorated function docstring will be used. See <a href="https://pydoit.org/tasks.html#doc">doit doc</a></p>
</li>
<li>
<p><code>title</code>: an optional message string or callable generating a message, to print when the task is run. If nothing is provided, by default the task name is printed. If a string is provided, the task name will automatically be printed before it. If a callable is provided it should receive a single <code>task</code> argument and return a string. See <a href="https://pydoit.org/tasks.html#title">doit doc</a></p>
</li>
<li>
<p><code>pre_actions</code>: an optional list of actions to be executed before the main action(s). There are 2 basic kinds of actions: cmd-action and python-action. See <a href="https://pydoit.org/tasks.html#actions">doit doc</a></p>
</li>
<li>
<p><code>post_actions</code>: an optional list of actions to be executed after the main action(s). There are 2 basic kinds of actions: cmd-action and python-action. See <a href="https://pydoit.org/tasks.html#actions">doit doc</a></p>
</li>
<li>
<p><code>tell_why_am_i_running</code>: if True (default), an additional <code>why_am_i_running</code> action is prepended to the list of actions</p>
</li>
<li>
<p><code>file_dep</code>: an optional list of strings or instances of any pathlib Path class indicating the files required for this task to run. When none of these files are modified, the task will be skipped if already run. See <a href="https://pydoit.org/tasks.html#file-dep-file-dependency">doit doc</a></p>
</li>
<li>
<p><code>task_dep</code>: an optional list of tasks (names or callables) that should be run <em>before</em> this task. Note that this is also a convenient way to create a group of tasks. See <a href="https://pydoit.org/dependencies.html#task-dependency">doit doc</a></p>
</li>
<li>
<p><code>uptodate</code>: an optional list where each element can be True (up to date), False (not up to date), None (ignored), a callable or a command(string). Many pre-baked callables from <code>doit.tools</code> can be used: <code>result_dep</code> to depend on the result of another task, <code>run_once</code> to run only once, <code>timeout</code> for time-based expiration, <code>config_changed</code> for changes in a “configuration” string or dictionary, and more... See <a href="https://pydoit.org/dependencies.html#uptodate">doit doc</a></p>
</li>
<li>
<p><code>targets</code>: an optional list of strings or instances of any pathlib Path class indicating the files created by the task. They can be any file path (a file or folder). If a target does not exist the task will be executed. Two different tasks <em>can not</em> have the same target. See <a href="https://pydoit.org/tasks.html#targets">doit doc</a></p>
</li>
<li>
<p><code>setup</code>: tasks to be run before this task but only when it is run. See <a href="https://pydoit.org/dependencies.html#setup-task">doit doc</a></p>
</li>
<li>
<p><code>teardown</code>: actions to run once all tasks are completed. See <a href="https://pydoit.org/dependencies.html#setup-task">doit doc</a></p>
</li>
<li>
<p><code>getargs</code>: an optional dictionary where the key is the argument name used on actions, and the value is a tuple with 2 strings: task name, “value name”. getargs provides a way to use values computed from one task in another task. See <a href="https://pydoit.org/dependencies.html#getargs">doit doc</a></p>
</li>
<li>
<p><code>calc_dep</code>: See <a href="https://pydoit.org/dependencies.html#calculated-dependencies">doit doc</a></p>
</li>
<li>
<p><code>verbosity</code>: an optional custom verbosity level (0, 1, or 2) for this task. See <a href="https://pydoit.org/tasks.html#verbosity">doit doc</a></p>
</li>
</ul>
<p>Note: this relies on the <code>create_doit_tasks</code> hook, see <a href="https://pydoit.org/task_creation.html#custom-task-definition">here</a></p>
<h3 id="taskgen"><code>@taskgen</code><a class="headerlink" href="#taskgen" title="Permanent link">&para;</a></h3>
<p>A decorator to create a task generator (See <a href="https://pydoit.org/tasks.html#sub-tasks">doit subtasks</a>).</p>
<p>Similar to <code>@task</code>, you can use it without arguments and it will capture the name and docstring of the decorated function. This function needs to be a generator, meaning that it should <code>yield</code> tasks. Such tasks can be plain old dictionaries as in <code>doit</code>, or can be created with <code>task</code>.</p>
<p>For example this is a task group named <code>mygroup</code> with two tasks <code>mygroup:echo0</code> and <code>mygroup:echo1</code></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">doit_api</span> <span class="kn">import</span> <span class="n">taskgen</span><span class="p">,</span> <span class="n">task</span>

<span class="nd">@taskgen</span>
<span class="k">def</span> <span class="nf">mygroup</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; hey !!! &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;echo</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> 
                   <span class="n">actions</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;echo hi &gt; hoho</span><span class="si">%s</span><span class="s2">.txt&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">],</span> 
                   <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;hoho</span><span class="si">%s</span><span class="s2">.txt&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">])</span>
</code></pre></div>


<p>And this is one with two python subtasks:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">doit_api</span> <span class="kn">import</span> <span class="n">taskgen</span><span class="p">,</span> <span class="n">task</span>

<span class="nd">@taskgen</span>
<span class="k">def</span> <span class="nf">mygroup</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; hey !!! &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="nd">@task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;subtask </span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span>
              <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;a subtask </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span>
              <span class="n">title</span><span class="o">=</span><span class="s2">&quot;this is </span><span class="si">%s</span><span class="s2"> running&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">c_</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello sub&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">c_</span>
</code></pre></div>


<p><code>@taskgen</code> only accepts three optional arguments: <code>name</code> (that will be used for the base group name), <code>doc</code>, and <code>title</code>.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li>
<p><code>name</code>: an alternate base name for the task group. By default the name of the decorated function is used. See <a href="https://pydoit.org/tasks.html#sub-tasks">doit doc</a></p>
</li>
<li>
<p><code>doc</code>: an optional documentation string for the task group. By default the decorated function docstring will be used. See <a href="https://pydoit.org/tasks.html#doc">doit doc</a></p>
</li>
<li>
<p><code>title</code>: an optional message string or callable generating a message, to print when this task group is run. If nothing is provided, by default the task name is printed. If a string is provided, the task name will automatically be printed before it. If a callable is provided it should receive a single <code>task</code> argument and return a string. See <a href="https://pydoit.org/tasks.html#title">doit doc</a></p>
</li>
</ul>
<h3 id="why_am_i_running"><code>why_am_i_running</code><a class="headerlink" href="#why_am_i_running" title="Permanent link">&para;</a></h3>
<p>Goodie: a python action that you can use in any <code>doit</code> task, to print the reason why the task is running if the task declared a <code>file_dep</code>, <code>task_dep</code>, <code>uptodate</code> or <code>targets</code>. Useful for debugging. See <a href="https://github.com/pydoit/doit/issues/277">this doit conversation</a>.</p>
<h3 id="title_with_actions"><code>title_with_actions</code><a class="headerlink" href="#title_with_actions" title="Permanent link">&para;</a></h3>
<p>Goodie: an automatic title for doit tasks. Same than <a href="https://pydoit.org/tools.html#title-with-actions-title"><code>doit.title_with_actions</code></a> but removes <a href="#why_am_i_running"><code>why_am_i_running</code></a> actions if any is present.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href=".." title="Home" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </div>
            </div>
          </a>
        
        
          <a href="../changelog/" title="Changelog" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Changelog
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.2d1db4bd.min.js"></script>
      <script src="../assets/javascripts/bundle.6627ddf3.min.js"></script><script id="__lang" type="application/json">{"clipboard.copied": "Copied to clipboard", "search.config.pipeline": "trimmer, stopWordFilter", "search.result.placeholder": "Type to start searching", "search.result.one": "1 matching document", "search.config.lang": "en", "search.config.separator": "[\\s\\-]+", "clipboard.copy": "Copy to clipboard", "search.result.none": "No matching documents", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>